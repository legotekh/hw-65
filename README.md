## Маршрути

Всі маршрути починаються з `/api/:collection`, де `:collection` - назва колекції в базі даних.

### Створення даних
- **POST /api/:collection/insertOne** - Додати один документ
- **POST /api/:collection/insertMany** - Додати кілька документів

### Читання даних
- **GET /api/:collection/find** - Отримати документи з параметрами:
  - `filter` (JSON) - Фільтрація документів
  - `projection` (JSON) - Вибір полів
  - `sort` (JSON) - Сортування
  - `skip` (number) - Пропустити документи
  - `limit` (number) - Ліміт документів

### Оновлення даних
- **PUT /api/:collection/updateOne** - Оновити один документ
- **PUT /api/:collection/updateMany** - Оновити кілька документів
- **PUT /api/:collection/replaceOne** - Замінити один документ

### Видалення даних
- **DELETE /api/:collection/deleteOne** - Видалити один документ
- **DELETE /api/:collection/deleteMany** - Видалити кілька документів

### Додавання документу
```http
POST /api/users/insertOne
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com",
  "age": 30
}
   ## Нова функціональність

   ### Потокове читання з використанням курсорів
   - **GET /api/:collection/stream** - Отримання документів у вигляді потоку
   - Використовує MongoDB курсори для ефективної обробки великих обсягів даних
   - Параметри:
      - `filter` (JSON) - Фільтрація документів
      - `projection` (JSON) - Вибір полів
      - `sort` (JSON) - Сортування
      - `batchSize` (number) - Розмір пакету (за замовчуванням 100)

   **Приклад запиту:**
   ```http
   GET /api/products/stream?filter={"category":"electronics"}&projection={"name":1,"price":1}&sort={"price":-1}&batchSize=50

   1. **Потокове читання з курсорами:**
   - Використовує `cursor.stream()` замість `cursor.toArray()`
   - Дані передаються клієнту частинами через потік
   - Використовує `JSONStream` для коректного форматування
   - Параметр `batchSize` контролює розмір пакету отримання даних

2. **Агрегаційні запити:**
   - Приймає пайплайн агрегації в тілі запиту
   - Підтримує всі етапи агрегації MongoDB
   - Повертає результати у зручному форматі
   - Приклад показує групування, сортування та обмеження результатів

3. **Оптимізація продуктивності:**
   - Для великих даних: курсори зменшують навантаження на пам'ять
   - Агрегація виконується на стороні БД, що швидше обробки в JS
   - Потокова передача дає можливість почати обробку до завершення запиту